<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    {{ data.head | safe }}
    <style>
        /* Global + Section Styles */
        {{ data.global.css | safe }}
        {% for block in data.code_bloks %}
            {{ block.css | safe }}
        {% endfor %}
    </style>
</head>
<body data-render-context="live">
    {{ data.global.html | safe }}
    {% for block in data.code_bloks %}
        {{ block.html | safe }}
    {% endfor %}
    <script>
        // Global JavaScript
        (function () {
            try {
                {{ data.global.js | safe }}
            } catch (err) {
                console.error('Error in global JavaScript:', err);
            }
        })();

        // Section JavaScript
        {% for block in data.code_bloks %}
        (function () {
            try {
                {{ block.js | safe }}
            } catch (err) {
                console.error('Error in section "{{ block.name }}":', err);
            }
        })();
        {% endfor %}
    </script>
</body>
</html>